{% extends "base.html" %}
{% block title %}{{ product.meta_title|default:product.name }} • Ka'Shea Cosmetics{% endblock %}
{% block meta %}
{% if product.meta_description %}
<meta name="description" content="{{ product.meta_description }}">
{% endif %}
{% endblock %}
{% block content %}
<div class="row g-4">
    <div class="col-md-6">
        {% with primary=product.images.all %}
        {% if primary %}
        <img class="img-fluid rounded" src="{{ primary.0.image.url }}"
            alt="{{ primary.0.alt_text|default:product.name }}">
        {% endif %}
        {% endwith %}
    </div>
    <div class="col-md-6">
        <h1 class="h3">{{ product.name }}</h1>
        <p class="lead">£{{ product.price }}</p>
        {% if product.short_description %}<p>{{ product.short_description }}</p>{% endif %}
        <div class="mb-3">{{ product.description|linebreaks }}</div>
        <form>
            <button type="button" class="btn btn-brand">Add to Cart</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "{{ product.name|escapejs }}",
  {% if product.images.first %}"image": ["{{ product.images.first.image.url }}"],{% endif %}
  "sku": "{{ product.sku|default:''|escapejs }}",
  "offers": {
    "@type": "Offer",
    "priceCurrency": "GBP",
    "price": "{{ product.price }}",
    "availability": "https://schema.org/{% if product.stock > 0 %}InStock{% else %}OutOfStock{% endif %}"
  },
  "description": "{{ product.meta_description|default:product.short_description|default:''|escapejs }}"
}
</script>
{% endblock %}